# 2026年運勢鑑定書発行アプリ

StreamlitとReportLabを使用した、ブラウザ上で動作する運勢鑑定書PDF生成アプリです。

## 機能

- お名前と生年月日を入力
- 数秘術（ライフパスナンバー）に基づいた運勢鑑定
- A4サイズの美しいPDF生成（ピンク・ゴールドの女性向けデザイン）
- PDFの自動ダウンロード

## インストール方法

1. 必要なパッケージをインストール：
```bash
pip install -r requirements.txt
```

2. アプリを起動：
```bash
streamlit run app.py
```

3. ブラウザで `http://localhost:8501` にアクセス

## フォントの扱い方

### 自動ダウンロード機能

このアプリは、初回起動時に自動的にIPAex明朝フォントをダウンロードします。

- フォントは `fonts/ipaexm.ttf` に保存されます
- インターネット接続が必要です（初回のみ）
- フォントのダウンロードに失敗した場合、英語フォント（Helvetica）が使用されます

### 手動でフォントを設定する場合

1. [IPAexフォント](https://moji.or.jp/ipafont/)からIPAex明朝をダウンロード
2. `fonts` フォルダを作成
3. `ipaexm.ttf` を `fonts/` フォルダに配置

### フォントの変更

別の日本語フォントを使用したい場合：

1. `app.py` の `FONT_PATH` を変更：
```python
FONT_PATH = os.path.join(FONT_DIR, "your_font.ttf")
```

2. `download_font()` 関数内の `font_url` を変更、または手動でフォントファイルを配置

3. `register_font()` 関数内のフォント名を変更：
```python
pdfmetrics.registerFont(TTFont('YourFontName', FONT_PATH))
```

4. `create_pdf()` 関数内の `font_name` を変更：
```python
font_name = 'YourFontName'
```

## PDFの内容

生成されるPDFには以下の情報が含まれます：

- **タイトル**: 2026年 運勢鑑定書 - {お名前} 様
- **ライフパスナンバー**: 生年月日から計算された数秘術の数字
- **性格**: ライフパスナンバーに基づいた性格分析
- **総合運**: 大吉・中吉・小吉と説明
- **恋愛運**: ★の数（1-5）とアドバイス
- **仕事運**: ★の数（1-5）とアドバイス
- **ラッキーカラー**: あなたのラッキーカラー
- **ラッキーアイテム**: あなたのラッキーアイテム

## 数秘術について

ライフパスナンバーは、生年月日の各数字を1桁になるまで足し算して求めます。

例：1990年1月1日
- 1+9+9+0+0+1+0+1 = 21
- 2+1 = 3
- ライフパスナンバーは「3」

マスターナンバー（11, 22, 33）はそのまま使用されます。

## トラブルシューティング

### フォントが表示されない場合

1. `fonts` フォルダが存在するか確認
2. `ipaexm.ttf` ファイルが存在するか確認
3. インターネット接続を確認（初回ダウンロード時）
4. アプリを再起動

### PDFが生成されない場合

1. 日付が正しく入力されているか確認（例：2月30日は無効）
2. エラーメッセージを確認
3. Streamlitのログを確認

## ライセンス

このアプリは教育目的で作成されています。
IPAexフォントはIPAフォントライセンスに基づいて使用しています。

